###################
### KEYBINDINGS ###
###################

# Variables
$terminal = kitty
$fileManager = thunar
$menu = rofi -show drun
$browser = firefox
# "Windows-Key" / LGui
$mainMod = SUPER

# Global shortcuts
# hyprshot
bind = $SUPER_SHIFT, s, exec, hyprshot -m region

# hyprlock
bind = $SUPER_SHIFT&Control_L, l, exec, hyprlock

# Basics
bind = $mainMod, return, togglespecialworkspace, terminal
bind = $mainMod SHIFT, q, exec, pgrep qalculate-gtk && hyprctl dispatch togglespecialworkspace calculator || qalculate-gtk &
bind = $mainMod, c, killactive
bind = $mainMod, m, exit
bind = $mainMod, e, exec, $fileManager
bind = $mainMod, v, togglefloating
bind = $mainMod, space, exec, $menu
#bind = $mainMod, p, pseudo, # dwindle
bind = $mainMod, o, togglesplit, # dwindle
bind = $mainMod, f, fullscreen
bind = $mainMod, z, exec, $browser
bind = $mainMod, w, exec, ~/dotfiles/scripts/change-wallpaper.sh
# In case hyprpanel crashes, restart won't do anything, so we start
#bind = $mainMod, b, exec, hyprpanel restart || hyprpanel
bind = $mainMod, p, exec, rofi -modi clipboard:/home/niels/Projects/cliphist/contrib/cliphist-rofi-img -show clipboard -show-icons
bind = $mainMod, b, exec, kitty -e zellij -l welcome
bind = $mainMod, n, exec, kitty -e zellij -l compact

# Move windows with shortcuts instead of mouse
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, l, movewindow, r
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, j, movewindow, d

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
# Resize window with mainMod + arrow keys
binde = $mainMod CTRL, h, resizeactive, -15 0
binde = $mainMod CTRL, l, resizeactive, 15 0
binde = $mainMod CTRL, k, resizeactive, 0 -15
binde = $mainMod CTRL, j, resizeactive, 0 15
# relatedly, this quickly changes the ratio of the active window quicker than resizing
bind = $mainMod, u, splitratio, 0.25
bind = $mainMod, i, splitratio, -0.25

# Move focus with mainMod + arrow keys
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d

### WORKSPACES
# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# (re-?) add media keybinds
# l -> do stuff even when locked
# e -> repeats when key is held 
bindle=, XF86AudioRaiseVolume, exec, vol --up
bindle=, XF86AudioLowerVolume, exec, vol --down
bindle=, XF86MonBrightnessUp, exec, bri --up
bindle=, XF86MonBrightnessDown, exec, bri --down
bindle=, XF86Search, exec, launchpad
# bindl=, XF86AudioMute, exec, amixer set Master toggle
bindl=, XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl=, XF86AudioPlay, exec, playerctl play-pause # the stupid key is called play , but it toggles 
bindl=, XF86AudioNext, exec, playerctl next 
bindl=, XF86AudioPrev, exec, playerctl previous

### GROUPS/TABS
###
#Grouped (tabbed) windows
#
#Hyprland allows you to make a group from the current active window with the togglegroup bind dispatcher.
#
#A group is like i3wm’s “tabbed” container. It takes the space of one window, and you can change the window to the next one in the tabbed “group” with the changegroupactive bind dispatcher.
#
#The new group’s border colors are configurable with the appropriate col. settings in the group config section.
#
#You can lock a group with the lockactivegroup dispatcher in order to stop new windows from entering this group. In addition, the lockgroups dispatcher can be used to toggle an independent global group lock that will prevent new windows from entering any groups, regardless of their local group lock stat.
#
#You can prevent a window from being added to a group or becoming a group with the denywindowfromgroup dispatcher. movewindoworgroup will behave like movewindow if the current active window or window in direction has this property set.
#
# https://www.reddit.com/r/hyprland/comments/11hit7o/i3wmswaylike_tabbed_stacked_layouts/

#bind = $mainMod ALT, s, changegroupactive, b # Go to previous stacked windows
#bind = $mainMod ALT, w, changegroupactive, f # Go to next stacked window

bind = $mainMod, q, focuscurrentorlast # Fastswitch lol

bind = $mainMod SHIFT, g, togglegroup

#Moving focus on the next or previous window inside the group
bind = $mainMod, bracketleft, changegroupactive, b
bind = $mainMod, bracketright, changegroupactive, f

#Swaping the active window with the next or previous in a group
#Перемещает окно вперед или назад внутри группы
bind = $mainMod SHIFT Control, b, movegroupwindow, b
bind = $mainMod SHIFT Control, f, movegroupwindow, f

#Moving non-tabbed window inside tabbed group by direction
bind = $mainMod SHIFT Control, left, moveintogroup, l
bind = $mainMod SHIFT Control, right, moveintogroup, r
bind = $mainMod SHIFT Control, up, moveintogroup, u
bind = $mainMod SHIFT Control, down, moveintogroup, d

#Moving tabbed window out from the group
bind = $mainMod SHIFT Alt, left, moveoutofgroup, l
bind = $mainMod SHIFT Alt, right, moveoutofgroup, r
bind = $mainMod SHIFT Alt, up, moveoutofgroup, u
bind = $mainMod SHIFT Alt, down, moveoutofgroup, d 

group {
  #This variable sets the color of the active window`s border in a group
  col.border_active = rgba(5eead4ee)

  #This subgroup contains variables to set the colors of the "bar"
  groupbar {
      col.inactive = rgba(595959aa)
      col.active = rgba(595959FF)
  }      
}
